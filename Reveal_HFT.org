# -*- coding: utf-8 -*-R
#+OPTIONS: reveal_center:t reveal_progress:t reveal_history:t reveal_control:t
#+OPTIONS: reveal_mathjax:t reveal_rolling_links:t reveal_keyboard:t reveal_overview:t 
#+OPTIONS: toc:nil num:nil reveal_slide_number:nil
# <reveal_width:1024 reveal_height:800> # 1366*768 is 16:9 ratio
#+OPTIONS: revealjs_previewLinks:t
#+REVEAL_MARGIN: 0.1 ## Very useful to determine the margin around the slides
#+REVEAL_MIN_SCALE: 0.5
#+REVEAL_MAX_SCALE: 2.5
#+REVEAL_THEME: serif
#+REVEAL_TRANS: cube
#+REVEAL_EXTRA_CSS: ./presentation.css

#+Title: High Frequency Quoting and Market Manipulations
#+Author: Romain Lafarguette, DG-MF/FRE
#+Email: Very Preliminary

* Start with a $1.5 billion question

** A 1.5 billion USD question
How long does it take to send a roundtrup signal Tokyo-London ?

[[./images/earth_london.png]]

** 230 millisecond (0.23s)
Reaction of the fastest man alive: 150 ms (Berlin World Championships, 2009)

[[./images/usain_bolt.png]]

Human average: 265ms (for young men)

** USD 1.5 billion:
The cost of reducing London-Tokyo latency  from 230ms to 170ms (Russian Optical
Transarctic Cable System) operational at the end of 2016

[[./images/russian_cable.png]]



* Appetite-teaser

[[./images/mise_en_bouche.png]]

/Noix de coquilles Saint-Jacques rôties, salsifis et endives caramélisés au
cumin/

** Agenda
#+ATTR_REVEAL: :frag (roll-in)
   - High-frequency trading and market manipulation
   - Conceptual framework for understanding and designing market regulations
   - New identification strategy and natural market experiment
   

** Key takeaways
#+ATTR_REVEAL: :frag (roll-in)
   1. HFT is neither "good" nor "bad": *trading strategies* matter
   2. Trading strategies go beyond the deal itself
   3. Focus on *high-frequency quoting*   
   4. New method for identifying *high-frequency manipulations*
   5. *Backtest* on real data, using a natural market experiment


* What is High Frequency Trading ?

** HFT definition accord to MIFID II
HFT is an *algorithmic trading technique* that is characterised by:

#+ATTR_REVEAL: :frag (roll-in)
- *Infrastructure* intended to minimise network and other types of latencies
- *System-determination* of order initiation, generation, routing or execution
  without human intervention for individual trades or orders
- *High message intraday* rates which constitute orders, quotes or cancellations


** Evolution of high-frequency trading across time 

[[./images/hft_rise.gif]]

Daily HFT trading. Credits: Nanex


* When HFT Becomes Visible: Flash Crashes

** Why should we care about HFT ?
#+ATTR_REVEAL: :frag (appear)
1. *Highly leveraged agents* + fire sales = systemic risk via reactions chains

2. *Evaporating liquidity* and weaker monetary policy transmission channel

3. *Market integrity* and unfair treatment of institutional investors


** The US equity flash crash: May 6th 2010

[[./images/us_flash_crash.png]]


** 5-minutes crash: equivalent to the Danish GDP !

[[./images/denmark.png]]


** Any role for regulation ?
William Dudley, NY Fed President (Sept 2015): 

/regulations on  such [HFT] activities  may be needed  fiven liquidity tends to  dry up in  times of
stress/






* HFT: Controversies and Conceptual Framework

** Pros and cons of HFT for financial markets
#+ATTR_REVEAL: :frag (appear)
| Pros                           | Cons                                   |
|--------------------------------+----------------------------------------|
| Liquidity Provision            | Shock Amplifiers ?                     |
| Improve information processing | Liquidity mirage                       |
| Enhance price discovery        | Discourage institutional market makers |
| Reduce transaction costs       | Predatory strategies                   |




** The fundamental regulatory trade-off

*Regulatory challenges*: 

- Ensure markets well-functionning and resilience 
- Fair treatment of every participants (esp. low-latency traders)
- Preserve liquidity and industry's incentives to trade (profits)


** FRE staff daily tasks :-)
[[./images/regulations_mess.png]]


** The MiFID II regulatory approach
#+ATTR_REVEAL: :frag (appear)
1. Disclosure requirements and trading risks controls
2. Taxation and trading fees regimes
3. Technical limitations on the trading plateforms
4. Market making and trading obligations


* New Conceptual Framework: It's All About Quoting !

** A typology of trading strategies
#+ATTR_REVEAL: :frag (roll-in)
- /Per se/, HFT is neither "bad" nor "good"
- What matters is the *trading strategy* implemented
- Fundamental distinction between:
  - *High-frequency market making* (/liquidity provision/)
  - *Arbitrage activities* (/price discovery/)
  - *Predatory strategies* (/market manipulation/)


** Prey and predators: some examples (see Biais 2010)
#+ATTR_REVEAL: :frag (roll-in)
- *Stuffing*: submit very large number of orders => generate congestion and confusion
- *Smoking*: attract slow traders with generous offers terms and revise them downwards, hoping to
  execute them profitably
- *Spoofing*: place a large number of orders in the opposite direction to the fast trader's true
  intention, in order to move prices to the benefit of the fast trader




** From high-frequency trading to high-frequency quoting
#+ATTR_REVEAL: :frag (appear)
- What matters is not high-frequency trading but *high-frequency quoting*
- A large part of predatory strategies are based on misinformation quoting
- Some evidences are clearly pointing towards this direction


** Message growth 

[[./images/message_growth.png]]

Cumulative trades and quotes per seconds


** Daily trade and quote counts for US stocks
[[./images/trades_quotes.png]]



** Research questions
#+ATTR_REVEAL: :frag (appear)
- *Supervision*: How to identify the predatory strategies in real time ?
- *Academic*: How to measure the impact of these strategies on market
  volatility/flash crashes ?
- *Policy*: How to design regulations able to tackle this issue while
  preserving markets functionning ?




* Identification Overview 

** Identification Challenges
#+ATTR_REVEAL: :frag (appear)
- *Data*: need high-frequency data with both quotes & trades
- *Strategies*: need to identify the different strategies from anonymous data
- *Endogeneity*: strategies and market conditions are simultaneously determined

** Data 
#+ATTR_REVEAL: :frag (appear)
1. Data availability: EBS FX trading:
   - Q1 2014 & Q1 2015
   - >6 billion observations
   - 30 currency pairs
   - >200 GB of data

2. 100 milliseconds time span

3. "Level 5 data" : quotes and deals, prices and volumes, trade side

4. Covers before and after WM Reuters fixing methodology

5. Covers SNB move (15/01) and EURUSD flashcrash (18/03)

** EBS terminal and data
[[./images/EBS_terminal.png]]





* Identification Strategy
** Identifying HFT
#+REVEAL_HTML: <iframe id="b_tr" class="stretch" src="./charts/reaction_time.html"> </iframe>

** Identification of Quoting Strategies
[[./images/benford_newcomb_face.png]]

- *Idea*: spoofing strategies consists in overloading the market with quotes at
  a specific level. Spoofing should therefore impact pips distribution

- Identification strategy: *pips distribution degree of deviation from Benford's law* 

** Benford's Law

The probability that $d (d \in {0,1,...,9})$ is encountered as the $n-$ th (n > 1) digit is:



$\sum^{k=10^{n-2} - 1}_{k=10^{n-2}} \log_{10} (1 + \frac{1}{10k + d})$








** Intuition behind the Benford's law

- It is all about scale invariance
- Intuition: growth rate of city population

[[./images/LogScale.png]]
[[./images/city_growth.png]]

** Benford's law applications
#+ATTR_REVEAL: :frag (roll-in)
1. *Accounting fraud detection*: suggested by Hal Varian in 1972. Used by the
   US and Swiss fiscal authorities to check up tax declarations
2. *Financial data*: Corrazza et al. (2010) have applied the Benford Law to
   SP500 stocks quotation and found that during major crisis (2007), the
   distribution deviates strongly
3. *Macroeconomic data*: the Greek figures before entering the European Union
   were probably fraudulent
4. *Election data*: application to Iran


** Benchmarking the Benford's Law
   - Need a metric to measure the *distance between two distributions*
   - Two metrics have been proposed which are powerful enough at finite
     distance (+ derivation of the critical values at 1% ,5% and 10%):

   - Leemis $m = \sqrt{N} \  \max_{i=1}^{9} \left\{\text{Pr}(\text{X}:
     \text{digit} = i) - \text{log}_{10}(1 + 1/i) \right\}$
   
   - Cho-Gaines' $d= \sqrt{N \ \sum_{i=1}^{9} \left[Pr(\text{X}:
     \text{digit} = i) - \text{log}_{10}(1 + 1/i) \right]^{2}}$   

** Graphical intuition
[[./images/ks_graphical_intuition.png]]
** Implementation challenges
#+ATTR_REVEAL: :frag (roll-in)
   - Where to look ?
   - How can I be sure that my metric is correct ?
   - Ideally, I would need an *exogenous* shock to test my identification
     strategy
 

* Backtesting Exercise
** The 15 February 2015 WM Reuters Fixing Reform
#+ATTR_REVEAL: :frag (appear)
  - 2013-2014: scandal of the WM Reuters and ECB *fixing manipulation*

  - Consequence: on 15 February 2015
    - Reuters decides to have a new methodology
    - Time windows for computing the fixing was changed from *30 seconds* to *5 minutes*

** Before the reform 
#+REVEAL_HTML: <iframe id="b_tr" class="stretch" src="./charts/num_trades_before.html"> </iframe>

** After the reform
#+REVEAL_HTML: <iframe id="a_tr" class="stretch" src="./charts/num_trades_after.html" > </iframe>

** Cho-Gaines distance before and after
#+REVEAL_HTML: <iframe id="a_tr" class="stretch" src="./charts/benford_dev_cho.html" > </iframe>

** Leemis distance before and after
#+REVEAL_HTML: <iframe id="a_tr" class="stretch" src="./charts/benford_dev_leemis.html" > </iframe>


* Policy Implications

** Markets supervision
   My modified approach of the Benford's test to test for markets /anomaly/ is:
#+ATTR_REVEAL: :frag (roll-in)
   - *Easy* to implement: just need to observe quotes stream and limited
     computing capacities
   - Works on *anonymized data* (what the regulators observed)
   - First test before thorough investigations  
   - Resilient to *quoting manipulations*: based on the same information that
     the "preys" receive 
     


** Regulations: separating the wheat from the chaff
   #+ATTR_REVEAL: :frag (roll-in)
   - *High-frequency quoting* (HFQ) has little to do with markets efficiency and
     liquidity ($\neq$ high-frequency trading)
   - Regulating HFQ is *easy* at the plateform level:
     - Impose quote latence
     - Limit quote posting/time interval for a given terminal
     - Regulate more strictly *last-look option*
   - Regulating HFQ would have no impact on liquidity nor market
     efficiency
   - Reduces noise and improve information processing, especially for
     low-latency traders  
   - /NB: I should investigate more broady the question of high-frequency messaging/
     



* Contributions and Way Forward

** Contributions
#+ATTR_REVEAL: :frag (roll-in)
1. Conceptual framework
 - HFT is neither "good" nor "bad": *trading strategies* matter
 - *High-frequency quoting is what regulators and academic should look at*

2. Identification strategy
 - Easy and straightforward: based on a statistical distribution
 - Back-tested on real data and during a natural market experiment

3. Policy recommendations
 - Developped a monitoring tool for regulators
 - Suggest policy recommendations on high-frequency quoting regulations


** Way forward
   - Test it on more currencies on a larger time span
   - Look at ECB fixing (2.30 pm ECT) as well
   - Add the significance thresholds on the distributions metric
   - Optimize the benchmarking to heuristic distributions (non-parametric)
   - Run impact analysis on volatility and liquidity measures  




